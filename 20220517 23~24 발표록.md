# 뽀또

## 아이템 23

**한꺼번에 객체 생성하기**

타입스크립트 타입은 일반적으로 변경되지 않아, 자바스크립트 패턴을 타입스크립트로 모델링하는게 쉽다.

즉 객체를 생성할 때는 속성을 하나씩 추가하기보다는 여러 속성을 포함해서 한꺼번에 생성해야 타입 추론에 유리하다.

```tsx
interface Point ( x: number , y:number };

const pt = {
    x : 3,
    y : 4,
};

as 를 사용하여 타입체커를 통과하게 만들수도 있다.

const pt = {} as Point;
pt.x = 3;
pt.y = 4;

// 위와 아래는 같다.

const pt: Point = {
    x : 3, 
    y : 4,
}
```

객체 전개 연산자를 통해 큰 객체를 한꺼번에 만들어 낼수도 있다.

```tsx
const namedPoint = {...pt, ...id}
namedPoint.name // type string 
```

타입에 안전한 방식으로 조건부 속성을 추가하려면 속성을 추가하지 않는 null 또는 {} 으로 객체 전개를 사용하면 된다.

```tsx
declare let hasMiddle : boolean;
const firstLast = {first : "Harry" , last : "Truman" };
const president = {
    ...firstLast,
    ...(hasMiddle 
    ? {middle: "S" } 
    : {})
};
```

전개 연산자로 한꺼번에 여러 속성을 추가할수도 있다는 것이다. 

유니온보다 선택적 필드를 다루기에 더 쉽기 때문에 선택적 필드 방식으로 표현하려면 헬퍼 함수를 사용하면 된다.

```tsx
function addOptional<T extends object, U extends object>(
    a: T, b: U | null
) : T & Partial<U> {
    return {...a, ...b};
}
const pharaoh = addOptional(
    nameTitle,
    hasDates ? { start: -2578 , end : -2524 } : null
);
pharaoh.start // 정상 타입이 number | undefined
```

- 속성을 제각각 추가하지 말고 한꺼번에 객체로 만들어야 한다.
- 안전한 타입으로 속성을 추가하려면 객체 전개를 사용하면 된다.
- 객체에 조건부로 속성을 추가하는 방법을 익히자.

## 아이템 24

**일관성 있는 별칭 사용하기**

하나의 객체의 변수를 만들어 할당하여 그 타입을 변경하면 원래 속성값에서도 변경하게 된다.

별칭을 남발해서 사용하면 제어 흐름을 분석하기 어렵기에 별칭을 신중하게 사용해야 한다.

타입을 자료구조형으로 사용하여 속성을 빠르게 체크할수 있다.

```tsx
interface Coordinate {
    x : number;
    y : number;
}

interface BoundingBox {
    x : [number , number];
    y : [number , number];
}

interface Polygon {
    exterior : Coordinate[];
    holes : Coordinate[][];
    bbox? : BoundingBox;
}
```

객체 비구조화를 이용할 때는 두가지를 주의해야한다.

- 전체 속성이 아니라 각 속해 있는 선택적 속성일 경우에 속성 체크가 더 필요하기에 타입 경계에 null 값을 추가하는 것이 좋다.
- 선택적 속성이 적합하다고 생각하지만, 안에 속해 있는 별칭이 선택적이라면 값이 겂거나 빈 배열이 될 것이다.

- 별칭은 타입스크립트가 타입을 좁히는 것을 방해한다. 따라서 변수에 별칭을 사용할 때는 일관되게 사용해야 한다.
- 비구조화 문법을 사용해서 일관된 이름을 사용하는 것이 좋다.
- 함수 호출이 객체 속성의 타입 정제를 무효화 할 수 있다는 점을 주의해야 한다.
- 속성보다 지역 변수를 사용하면 타입 정제를 믿을 수 있다.
