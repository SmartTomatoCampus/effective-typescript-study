# 뽀또

## 아이템 43

**몽키 패치보다는 안전한 타입을 사용하기**

window, document에 변수명을 넣어 타입을 전역으로 사용하는 방법도 있다.

interface의 특수 기능 중 하나인 보강을 사용하는 것이다.

- 타입이 더 안전하다. 타입 체커는 오타나 잘못된 타입의 할당을 오류로 표시한다.
- 속성에 주석을 붙일 수 있다.
- 속성에 자동완성을 사용할 수 있습니다.
- 몽키 패치가 어떤 부분에 적용되었는 정확한 기록이 남는다.

보강을 사용할 때 주의해야 할 점은 모듈 영역과 관련이 있다.

- 전역 변수나 DOM에 데이터를 저장하지 말고 데이터를 분리하여 사용해야 한다.
- 내장 타입에 데이터를 저장해야 하는 경우 안전한 타입 접근법 중 하나로 보강이나 사용자 정의 인터페이스로 단언을 해야 하낟.
- 보강의 모듈 영역 문제를 이해해야 한다.

# 너두

## 아이템 43 몽키 패치보다는 안전한 타입을 사용하기

- window 또는 DOM 노드에 데이터를 추가한다고 가정했을때 그데이터는 전역변수가 되고 은연중에 프로그램 내에서 서로 멀리 떨어진 부분들 간에 의존성을 만들어 사이드 이펙트를 고려해야만 한다
- 가장 간단하게 에러를 해결하는 방법은 any 단언을 사용 그러나 안정성을 잃어버리고 타입의 의미가 상실함
- 가장 좋은 해결책은 document 나 DOM으로부터 데이터를 분리하는것
1. interface의 특수기능인 보강을 사용하는것 
- 보강이 any보다 나은점은 타입이 더 안전함 
- 속성에 주석을 붙일 수 있음
- 속성에 자동완성 추가 가능
- 몽키 패치가 어떤 부분에 적용되었는지 정확한 기록이 남음
모듈관점에서 타입스크립트 팡리이 import, export 사용하는경우 제대로 동작하려면 global 선언을 추가해야함
보강을 사용할때 주의할점은 scope와 관련이 있음. 보강은 전역적으로 적용되기 때문에 코드의 다른 부분이나 라이브러리로부터 분리할 수 없음
웹 페이지 내의 HTML엘리먼츠를 조작할때  어떤 엘리먼트는 있고 어떤 엘리멘트가 없는경우 문제됨
2. 더 구체적인 타입 단언문을 사용하는 것
확장하는 타입을 단언하는 것은 안전하다. 기존 타입을 건드리지 않고 확장하는 것이기 때문에 모듈영역 문제도 해결할 수 있다(import 영역에만 해당) 고로 몽키패치된 속성을 참조하는 경우에만 단언문을 사용하거나 새로운 변수를 도입하면 된다. 그러나 몽키패치를 남용해서는 안되며 궁극적으로 더 잘설계된 구조로 리팩토링 하는게 좋다. 
