# 꽁치

1. 변수의 값은 바뀌더라도 타입은 바뀌지 않도록 해서 코드를 더 간결하게, 그리고 타입 추론이 즉각즉각 잘 돼서 타입 구문 마저 필요없게 작성하는 것이 좋다!
2. 타입스크립트는 기본적으로 추론되는 타입을 넓히는 경향이 있다. 따라서 이를 제한하는 방법들로 타입을 안전하게 지킬 수 있다.
	1. const 변수 선언으로 타입을 좁힌다.
	2. 타입 구문을 직접 명시한다.
	3. 추가적인 문맥을 제공한다 (함수의 디폴트 파라미터는 타입 구문 없이도 타입을 지정해준다)
	4. as const 를 쓰면, 타입스크립트는 최대한 좁은 타입으로 추론한다.
3. 타입 좁히기는 분기문 방식 외에도, instanceof 를 사용해 타입을 좁히거나, 속성 체크, Array.isArray, 명시적 태그를 붙이는 방법(구별된 유니온), 타입 가드(커스텀 함수)로 타입을 좁힐 수 있다.

# 애한

## item 20 다른 타입에는 다른 변수 사용하기
변수의 값은 바뀔 수 있지만 그 타입은 보통 바뀌지 않는다. 타입을 바꿀 수 있는 방법은 범위를 좁히는 것인데, 새로운 변수값을 포함하도록 확장하는 것이 아니라 타입을 더 작게 제한하는 것.
string|number 처럼 표현해 유니온 타입으로 표현하여 확장할 수도 있으나 차라리 별도의 변수를 도입하는게 낫다.
타입이 바뀌는 변수는 되도록 피해야하며 목적이 다른 곳에는 별도의 변수명을 사용해야한다.

## item 21 타입 넓히기
타입스크립트의 넓히기 과정 방법
1. const
2. 타입체커에 추가적인 문맥 제공
3. const 단언문 사용
## item 22 타입 좁히기
타입스크립트의 좁히기 과정 방법
1. 분기문에서 예외를 던지거나 함수반환
2. instanceof 사용
3. Array.isArray 같은 내장함수 사용
4. 타입가드 사용
등등

# 뽀또

## 아이템 20

다른 타입에는 다른 변수 사용하기

자바스크립트에서는 한 변수를 다른 목적을 가지는 다른 타입으로 재사용해도 된다.

다른 타입에는 별도의 변수를 사용하는게 바람직한 이유

- 관련이 없는 변수라면 타입은 분리해서 값을 적용시켜야 한다.
- 타입 추론을 향상시키며 타입 구문이 불필요하다.
- 변수명을 더 구체적으로 지을 수 있다.
- 타입이 좀 더 간결해진다.
- const 로 변수를 지정하면 간결해지고 타입 체커가 추론하기에도 좋다.

변수의 값은 바뀔 수 있지만, 타입은 일반적으로 바뀌지 아니한다.

혼란을 막기 위해 타입이 다른 값을 다룰 때에는 변수를 재사용하지 않도록 한다.

## 아이템 21 타입 넓히기

런타임에 모든 변수는 유일한 값을 가진다. 그러나 타입스크립트가 작성된 코드를 체크하는 정적 분석 시점에 변수는 가능한 값들의 집합인 타입을 가진다.

상수를 사용해서 변수를 초기화할 때 타입을 명시하지 않으면 타입 체커는 타입을 결정해야 한다. 즉, 지정된 단일 값을 가지고 할당 가능한 값들의 집합을 유추해야 한다.

타입스크립트에서는 이러한 과정을 넓히기라고 부르고, 넓히기 과정을 이해한다면 오류의 원인을 파악하고 타입 구문을 더 효과적으로 사용할 수 있다.

타입스크립트는 넓히기 과정을 제어할 수 있도록 몇가지 제공한다.

1. const를 사용해서 더 좁은 타입이 된다.
    1. 타입의 오류를 해결할 수도 있다.

```tsx
const x = "x";
let vec = { x : 10, y : 20, z : 30 };
getComponent(vec, x);
```

1. 추가적인 문맥을 제공하는 것이다. 함수의 매개변수로 값을 전달하는 방법.
2. const 단언문을 사용하는 것이다.
    1. const 단언문과 변수 선언에 쓰이는 let이나 const와 혼동해서는 안된다.
    2. const 단언문은 온전히 타입 공간의 기법이다.

```tsx
const v1 = {
    x : 1,
    y : 2,
};

const v2 = {
    x : 1 as const,
    y : 2,
};

const v3 = {
    x : 1,
    y : 2,
} as const;
```

const 을 붙이게 되면, 타입스크립트는 최대한 좁은 타입으로 추론한다.

- 타입스크립트가 넓히기를 통해 상수의 타입을 추론하는 법을 이해해야 한다.
- 동작에 영향을 줄 수 있는 방법인 const 타입 구문, 문맥 as const에 익숙해져야 한다.
## 아이템 22

타입 좁히기

일반적인 예시로는 null 체크이다.

```tsx
const el = document.getElementById('foo');
// HTMLElement | null
if(el) {
    el
    el.innerHTML = "Party Time".blink();
// HTMLElement
} else {
    el
    alert("No element #foo");
}
// null
```

null 이라면 블록은 실행되지 않는다. null 타입을 미리 알고 있기에 더 좁은 타입이 되어 작업이 훨씬 쉬워진다.

이러한 방법은 분기문에서 예외를 던지거나 함수를 반환하여 블록의 나머지 부분에서 변수의 타입을 좁힐 수도 있다.

```tsx
const el = document.getElementById("foo");
//HTMLElement | null
if(!el) throw new Error("Unable to find #foo");
el;
// HTMLElement
el.innerHTML = "Party Time".blink();
```

미리 null (!) 로 표기후 에러를 반환하였기에 더욱 더 좁히게 되었다.

그외 타입을 좁힐수 있는 방법으로

- instanceof 타입체커를 통해 타입을 좁힐수도 있다.
- 속성 체크로도 타입을 좁힐 수도 있다.
- Array.isArray 같은 일부 내장함수로도 타입을 좁힐 수도 있다.
- 조건문에서 타입을 좁히는데 매우 능숙하다.
- 명시적 태그를 붙이는 방법도 타입을 좁히는 방법이다.

만약 타입스크립트가 타입을 식별하지 못한다면 식별을 돕기 위해 커스텀 함수를 도입할 수 잇다.

```tsx
function isInputElement(el: HTMLelement) : el is HTMLInputElemet {
    return "value" in el;
}

function getElementContent(el: HTMLElement) {
    if(isInputElement(el)) {
        el; // HTMLInputElement
        return el.value
    }
    el; // HTMLElement
    return el.textContent;
}
```

이러한 기법을 사용자 정의 타입 가드라고 한다.

el is HTMLInputElement 는 함수의 반환이 true인 경우 타입 체커에게 매개변수의 타입을 좁힐 수 있다고 알려준다.

어떤 함수들은 타입 가드를 사용하여 배열과 객체의 타입 좁히기를 할수 있다.

- 편집기에서 타입을 조사하는 습관을 지니면 타입 좁히기가 어떻게 동작하는지 자연스레 익힐 수 있다.
- 분기문 외에도 여러 종류의 제어 흐름을 살펴보며 타입스크립트가 타입을 좁히는 과정을 이해해야 한다.
- 태그된 구별된 유니온과 사용자 정의 타입 가드를 사용하여 타입 좁히기 과정을 원활하게 만들 수 있다.

# 삼앵

### 아이템 20


- 변수의 값은 바뀔수있지만 타입은 일반적으로 바뀌지않는다.
- 타입이 바뀌는 변수는 피해야하며 목적이다른곳에서는 별도의 변수를 사용하자.


### 아이템 21 

- 지정된 단일값을 가지고 가지고 할당 가능한 값들의 집합을 유추해야하는대 이러한 과정을 타입넓히기라고 칭한다.
- 타입넓히기 제어 방법 첫번째 const로 변수선언을 하여 타입을 좁혀서 사용하자.
- 타입넓히기 제어 두번째 타입체커에 추가적인 문맥제공 ex) 함수의 매개변수로 값전달
- 타입넓히기 제어 세번째 const 단언문을 사용 


### 아이템 22

- 타입을 좁히는 방법 instanceof 사용해 타입 좁히기
- in을 활용한 속성체크로 좁히기

# 로록

1. 변수 재할당을 할 때는 기존 값의 타입이 바뀌지 않기 때문에 만약 다른 타입으로 재할당을 할 거면 새로운 변수를 사용하는 것이 좋다.

2. 타입 넓히기
- 뜻 : 기존 지정 값을 통해 할당 가능한 값들의 집합을 유추하는 과정
- 제어방법
    1. const 사용하기
    2. 타입 체커에 추가적인 문맥 제공
    3. const 단언문 사용

3. 타입 좁히기
- 뜻 : 넓은 타입으로부터 좁은 타입으로 진행하는 과정
- 방법
    1. 조건문 → 타입 별칭이 존재하면 안 될 수도 있음

        ⇒ 대표적으로 null 체크

    2. 분기문에서 예외를 던지거나 함수 반환
    3. instanceof
    4. 속성 체크
    5. 명시적 태그 붙이기
    6. 커스텀 함수 도입 (사용자 정의 타입 가드)

# 나두

### 아이템 20 다른 타입에는 다른 변수 사용하기

- 변수의 값은 바뀔수 있지만 타입은 바뀌지 않는다
- 보통은 유니온 타입으로 확장한다 하지만 더 많은 문제가 생길수있다
- 그래서 별도의 변수를 도입한다

별도의 변수가 좋은점

1. 관련 없는 두개의 값을 분리
2. 변수명 더 구체적
3. 타입구문 불필요
4. 타입 간결
5. const 이용

### 아이템 21 타입 넓히기

- 단일값의 할당 가능한 값들의 집합을 유추 하는것을 넓히기라고 한다

타입 추론의 강도를 직접 제어하는 방법

1. 명시적 타입 구문을 제공
2. 타입 체커에 추가적인 문맥 제공
3. const 단언문 사용(만능이아니다)

### 아이템 22 타입 좁히기

- 타입 넓히기의 반대이다 (null check)
- 분기문에서 instanceof 사용
- 함수 블록 나머지 뿐에서 타입 좁히기
- 속성체크로 타입좁히기
- 자바스크립트의 null 타입은 object이니 유의
- 빈문자열 0 은 false가된다
- 명시적 태그를 붙인다(유니온 타입인것 같지만)
- 사용자 정의 타입가드를 쓸수도 있다(x is y)